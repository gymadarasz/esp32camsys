<style>
div.cam {
    position: relative;
}
img.cross {
    position: absolute;
    border: 1px solid red;
    top: 0px;
    left: 0px;
}
</style>
<script src="jquery-3.5.1.min.js"></script>

<div id="camtpl" style="display: none;">
    <div id="cam{camID}" class="cam">
        <img class="cross" src="crosshair.svg" style="display: none;" onmousedown="$(this).hide();">
        <div class="monitorFrame">
            <img class="monitor" src="" onmouseup="setWatcher({camID}, this)">
        </div>
        IP: <input class="ipaddr" type="text" value="192.168.0.100">
        <input type="button" value="refresh" onclick="refreshCamera({camID});"><br>
        X/Y: <input class="watchX" type="number"><input class="watchY" type="number"><br>
        Size: <input class="watchSize" type="number" value=10>
        Raster: <input class="watchRaster" type="number" value=5>
    </div>
</div>
<div class="camlist">

</div>
<input type="button" value="add camera" onclick="addCamera();"><br>
<img id="urlcaller" src="" style="display: none;">
<script>
    function getCameraIP(camID) {
        return $('#cam' + camID + ' input.ipaddr').first().val();
    }
    function refreshCamera(camID) {
        $('#cam' + camID + ' img.monitor').first().attr('src', 'http://' + getCameraIP(camID) + '/motion?t=' + $.now())
    }
    function getPosition(oElement) {
        if(typeof( oElement.offsetParent ) != "undefined") {
            for(var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent) {
                posX += oElement.offsetLeft;
                posY += oElement.offsetTop;
            }
            return [ posX, posY ];
        }
        return [ oElement.x, oElement.y ];
    }
    function getCoordinates(elem) {
        var px = 0;
        var py = 0;
        var imgPos;
        imgPos = getPosition(elem);
        var e = window.event;
        if (e.pageX || e.pageY) {
        px = e.pageX;
        py = e.pageY;
        } else if (e.clientX || e.clientY) {
            px = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
            py = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
        }
        px = px - imgPos[0];
        py = py - imgPos[1];
        return [px, py];
    }
    function callURL(url) {
        console.log(url);
        $('#urlcaller').attr('src', url);
    }
    function showWatcher(camID) {
        var x = $('#cam' + camID + ' input.watchX').first().val();
        var y = $('#cam' + camID + ' input.watchY').first().val();
        var s = $('#cam' + camID + ' input.watchSize').first().val();
        $('#cam' + camID + ' img.cross').first().attr('width', s*2);
        $('#cam' + camID + ' img.cross').first().attr('height', s*2);
        $('#cam' + camID + ' img.cross').first().css('top', (y-s)+'px');
        $('#cam' + camID + ' img.cross').first().css('left', (x-s)+'px');
        $('#cam' + camID + ' img.cross').first().show();
    }
    function setWatcher(camID, elem) {
        var xy = getCoordinates(elem);
        $('#cam' + camID + ' input.watchX').first().val(xy[0]);
        $('#cam' + camID + ' input.watchY').first().val(xy[1]);
        var size =  $('#cam' + camID + ' input.watchSize').first().val();
        var r = $('#cam' + camID + ' input.watchRaster').first().val();
        callURL('http://' + getCameraIP(camID) + '/watch?x=' + xy[0] + '&y=' + xy[1] + '&s=' + size + '&r=' + r + '&t=' + $.now());
        showWatcher(camID);                
    }
    function getNextCamID() {
        return $('.camlist .cam').length + 1;
    }
    function tplReplace(tpl, key, value) {
        while(tpl.indexOf('{' + key + '}') !== -1) tpl = tpl.replace('{' + key + '}', value);
        return tpl;
    }
    function addCamera() {
        var tpl = $('#camtpl').html();
        var camID = getNextCamID();
        tpl = tplReplace(tpl, 'camID', camID);
        $('.camlist').first().append(tpl);
        return camID;
    }
    function refreshCameraList() {
        var nextCamID = getNextCamID();
        for (var camID = 0; camID < nextCamID; camID++) {
            refreshCamera(camID);
        }
    }
    $(function() {
        refreshCamera(addCamera());
        setTimeout(function() {
            setInterval(function() {
                refreshCameraList();
            }, 1000);
        }, 5000);
    });
</script>